{% import 'macros/macros.j2' as macros %}
{% set nsg = namespace(first = true) %}
<div class="publication">
	<div class="publication-title"><img style="height: 1em;" src="./assets/{{pubtype}}.svg" alt="{{pubtype}}"/>&nbsp;{{ title }}</div>
	{%- if author|length > 1 -%}
	<div class="publication-authors"><img style="height: 1em;" src="./assets/author.svg"/>&nbsp;{{ author|highlight_JNW|author_join }}</div>
	{%- endif -%}
	{%- if journal is defined -%}
	{%set nsg.first=false%}
	<div class="publication-journal"><img style="height: 1em;" src="./assets/journal.svg"/>{{ journal }}
	{%- elif booktitle is defined -%}
	{%set nsg.first=false%}
	<div class="publication-journal"><img style="height: 1em;" src="./assets/journal.svg"/>{{ booktitle }}
	{%- elif eventtitle is defined -%}
	{%set nsg.first=false%}
	<div class="publication-journal"><img style="height: 1em;" src="./assets/venue.svg"/>{{ eventtitle }}
	{%- else -%}
	<div class="publication-journal">
	{%- endif -%}
		{%- if volume is defined -%}
			{% if not nsg.first %},{% else %}{%set nsg.first=false%}{% endif %} <span class="{{ ENTRYTYPE }} volume">{{ volume }}</span>
		{%- elif location is defined -%}
			{% if not nsg.first %},{% else %}{%set nsg.first=false%}{% endif %} <span class="{{ ENTRYTYPE }} volume">{{ location }}</span>
		{%- endif -%}
		{%- if number is defined -%}
			(<span class="{{ ENTRYTYPE }} number">{{ number }}</span>)
		{%- endif -%}
		{%- if issue is defined -%}
			(<span class="{{ ENTRYTYPE }} issue">{{ issue }}</span>)
		{%- endif -%}
		{%- if chapter is defined -%}
			(<span class="{{ ENTRYTYPE }} chapter">Ch. {{ chapter }}</span>)
		{%- endif -%}
		{%- if pages is defined -%}
			{% if not nsg.first %},{% else %}{%set nsg.first=false%}{% endif %} <span class="{{ ENTRYTYPE }} pages">{{ pages }}</span>
		{%- endif -%}
		{%- if note is defined -%}
			{% if not nsg.first %},{% else %}{%set nsg.first=false%}{% endif %} <span class="{{ ENTRYTYPE }} notes">{{ note }}</span>
		{%- endif -%}
	</div>
	{{ macros.publinks(bibTex, pubstate, abstract, link, doi, pdf, slides) }}
</div>
